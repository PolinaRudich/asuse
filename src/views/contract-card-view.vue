<template>
  <form class="contract-form" @submit.prevent="validateForm">
    <CBreadcrumb>
      <CBreadcrumbItem href="#">{{ currentContragent.NAME }}</CBreadcrumbItem>
      <CBreadcrumbItem href="#">{{
        layoutStore.currentContract.NDOG +
        " " +
        layoutStore.currentContract.DATE_START
      }}</CBreadcrumbItem>
    </CBreadcrumb>
    <div
      class="flex-container title-container"
      :style="
        scrolledDistance > 0 &&
        'box-shadow: 0px 16px 24px rgba(0, 0, 0, 0.05); border-bottom: 3px solid #dbdbdb;'
      "
    >
      <div class="flex-container">
        <span class="contract-title">
          Договор {{ layoutStore.currentContract.NDOG }}
        </span>
      </div>
      <div class="toolbar-container">
        <button-icon>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path d="M14 15L10 19L14 23" stroke="#33363F" stroke-width="2" />
            <path
              d="M18.0622 8.5C18.6766 9.56413 19 10.7712 19 12C19 13.2288 18.6766 14.4359 18.0622 15.5C17.4478 16.5641 16.5641 17.4478 15.5 18.0622C14.4359 18.6766 13.2288 19 12 19"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path d="M10 9L14 5L10 1" stroke="#33363F" stroke-width="2" />
            <path
              d="M5.93782 15.5C5.32344 14.4359 5 13.2288 5 12C5 10.7712 5.32344 9.56413 5.93782 8.5C6.5522 7.43587 7.43587 6.5522 8.5 5.93782C9.56413 5.32344 10.7712 5 12 5"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button-icon>
        <button-icon>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="9" stroke="#33363F" stroke-width="2" />
            <path
              d="M12 15L12 9"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="square"
            />
            <path
              d="M15 12L9 12"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="square"
            />
          </svg>
        </button-icon>
        <button-icon>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10 15L10 12"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M14 15L14 12"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M3 7H21V7C20.0681 7 19.6022 7 19.2346 7.15224C18.7446 7.35523 18.3552 7.74458 18.1522 8.23463C18 8.60218 18 9.06812 18 10V16C18 17.8856 18 18.8284 17.4142 19.4142C16.8284 20 15.8856 20 14 20H10C8.11438 20 7.17157 20 6.58579 19.4142C6 18.8284 6 17.8856 6 16V10C6 9.06812 6 8.60218 5.84776 8.23463C5.64477 7.74458 5.25542 7.35523 4.76537 7.15224C4.39782 7 3.93188 7 3 7V7Z"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M10.0681 3.37059C10.1821 3.26427 10.4332 3.17033 10.7825 3.10332C11.1318 3.03632 11.5597 3 12 3C12.4403 3 12.8682 3.03632 13.2175 3.10332C13.5668 3.17033 13.8179 3.26427 13.9319 3.37059"
              stroke="#33363F"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button-icon>
        <button-icon type="submit">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            typy="submit"
          >
            <path
              d="M3 6L21 6"
              stroke="#14181F"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M4 20L20 20C20.5523 20 21 19.5523 21 19L21 5C21 4.44771 20.5523 4 20 4L4 4C3.44772 4 3 4.44772 3 5L3 19C3 19.5523 3.44772 20 4 20Z"
              stroke="#14181F"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M15 11L11 15L9 13"
              stroke="#14181F"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button-icon>
        <div style="position: relative" @click="openSettings">
          <button-icon>
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M14.1361 3.36144L15.1312 3.26194L14.1361 3.36144ZM13.9838 2.54161L13.095 3V3L13.9838 2.54161ZM14.4311 4.81793L15.2261 4.21141L15.2261 4.21141L14.4311 4.81793ZM15.3595 5.20248L15.2261 4.21141L15.3595 5.20248ZM16.5979 4.38113L17.2311 5.15509L17.2311 5.15509L16.5979 4.38113ZM17.2853 3.90918L17.5896 4.86175L17.2853 3.90918ZM17.9872 3.94419L18.3848 3.02663L18.3848 3.02663L17.9872 3.94419ZM18.6243 4.4822L17.9172 5.1893L17.9172 5.18931L18.6243 4.4822ZM19.5178 5.37567L20.2249 4.66856L20.2249 4.66856L19.5178 5.37567ZM20.0558 6.01275L20.9733 5.61517L20.9733 5.61516L20.0558 6.01275ZM20.0908 6.71464L21.0434 7.01895L21.0434 7.01894L20.0908 6.71464ZM19.6188 7.4021L18.8449 6.76886L18.8449 6.76886L19.6188 7.4021ZM18.7975 8.64056L17.8064 8.50724L17.8064 8.50725L18.7975 8.64056ZM19.182 9.56893L18.5755 10.364L18.5755 10.364L19.182 9.56893ZM20.6385 9.86385L20.738 8.86882L20.6385 9.86385ZM21.4584 10.0162L21.9168 9.1275L21.9168 9.1275L21.4584 10.0162ZM21.9299 10.5373L22.8599 10.1696L22.8599 10.1696L21.9299 10.5373ZM21.93 13.4626L21 13.095L21 13.095L21.93 13.4626ZM21.4583 13.9838L21.9166 14.8726L21.9166 14.8726L21.4583 13.9838ZM20.6386 14.1361L20.5391 13.1411L20.5065 13.1444L20.4742 13.1497L20.6386 14.1361ZM20.6386 14.1361L20.7381 15.1312L20.7707 15.1279L20.803 15.1225L20.6386 14.1361ZM19.1825 14.4309L18.5762 13.6357L18.5762 13.6357L19.1825 14.4309ZM18.7979 15.3596L17.8068 15.4931V15.4931L18.7979 15.3596ZM19.619 16.5976L18.845 17.2308H18.845L19.619 16.5976ZM20.0908 17.2848L19.1383 17.5892V17.5892L20.0908 17.2848ZM20.0558 17.9869L19.1383 17.5892L19.1383 17.5892L20.0558 17.9869ZM19.5179 18.6238L20.225 19.3309H20.225L19.5179 18.6238ZM18.6243 19.5174L17.9172 18.8102L17.9172 18.8103L18.6243 19.5174ZM17.9873 20.0554L18.3849 20.9729L18.3849 20.9729L17.9873 20.0554ZM17.2854 20.0904L16.981 21.0429L16.981 21.0429L17.2854 20.0904ZM16.5979 19.6184L17.2312 18.8444L17.2226 18.8376L16.5979 19.6184ZM16.5979 19.6184L15.9646 20.3924L15.9732 20.3993L16.5979 19.6184ZM15.3595 18.7971L15.4928 17.806H15.4928L15.3595 18.7971ZM14.4311 19.1816L15.2262 19.7882L15.2262 19.7881L14.4311 19.1816ZM14.1362 20.6383L13.1411 20.5388V20.5388L14.1362 20.6383ZM13.9837 21.4585L13.095 21L13.095 21L13.9837 21.4585ZM13.4628 21.9299L13.095 21L13.095 21L13.4628 21.9299ZM10.5373 21.9299L10.905 21L10.5373 21.9299ZM10.0162 21.4584L10.905 21H10.905L10.0162 21.4584ZM9.86385 20.6385L8.86882 20.7381V20.7381L9.86385 20.6385ZM9.56892 19.182L8.77387 19.7885L8.77387 19.7885L9.56892 19.182ZM8.64057 18.7975L8.50728 17.8064H8.50727L8.64057 18.7975ZM7.40208 19.6189L6.76884 18.8449L6.753 18.8579L6.73771 18.8714L7.40208 19.6189ZM7.40206 19.6189L8.0353 20.3928L8.05113 20.3799L8.06643 20.3663L7.40206 19.6189ZM6.71458 20.0908L7.01887 21.0434H7.01887L6.71458 20.0908ZM6.01272 20.0558L5.61515 20.9734H5.61515L6.01272 20.0558ZM5.37561 19.5178L6.08271 18.8107H6.08271L5.37561 19.5178ZM4.48217 18.6243L3.77506 19.3315L3.77506 19.3315L4.48217 18.6243ZM3.94414 17.9873L4.86171 17.5897L4.86171 17.5897L3.94414 17.9873ZM3.90913 17.2854L4.86171 17.5897L4.86171 17.5897L3.90913 17.2854ZM4.3811 16.5979L5.15506 17.2311H5.15506L4.3811 16.5979ZM5.20247 15.3594L6.19355 15.4928L5.20247 15.3594ZM4.81792 14.4311L5.42445 13.636L5.42445 13.636L4.81792 14.4311ZM3.36143 14.1361L3.26193 15.1312H3.26193L3.36143 14.1361ZM2.54161 13.9838L3 13.095H3L2.54161 13.9838ZM2.07005 13.4627L1.14009 13.8304L1.14009 13.8304L2.07005 13.4627ZM2.07008 10.5372L1.14017 10.1694L1.14017 10.1694L2.07008 10.5372ZM2.54152 10.0163L2.08305 9.12757L2.08305 9.12757L2.54152 10.0163ZM3.36155 9.86384V8.86384H3.31167L3.26205 8.86881L3.36155 9.86384ZM3.36156 9.86384V10.8638H3.41143L3.46106 10.8589L3.36156 9.86384ZM4.81842 9.56881L4.21178 8.77383L4.21177 8.77383L4.81842 9.56881ZM5.20287 8.64066L6.19396 8.50749L6.19396 8.50749L5.20287 8.64066ZM4.38128 7.40182L5.15523 6.76858H5.15523L4.38128 7.40182ZM3.90914 6.71405L4.86175 6.40988L4.86175 6.40988L3.90914 6.71405ZM3.94413 6.01243L3.02651 5.61498L3.02651 5.61498L3.94413 6.01243ZM4.48233 5.37509L5.18944 6.0822H5.18944L4.48233 5.37509ZM5.37565 4.48177L4.66855 3.77466V3.77466L5.37565 4.48177ZM6.01277 3.94373L5.6152 3.02615L5.6152 3.02616L6.01277 3.94373ZM6.71463 3.90872L7.01892 2.95614V2.95614L6.71463 3.90872ZM7.4022 4.38076L8.03543 3.60681V3.60681L7.4022 4.38076ZM8.64044 5.20207L8.77391 4.21101L8.64044 5.20207ZM9.56907 4.81742L8.77391 4.21101L8.77391 4.21101L9.56907 4.81742ZM9.86387 3.36131L10.8589 3.46081V3.46081L9.86387 3.36131ZM10.0162 2.5417L9.12739 2.08341L9.12739 2.08341L10.0162 2.5417ZM10.5374 2.07001L10.905 3L10.905 3L10.5374 2.07001ZM13.4627 2.07005L13.8304 1.1401V1.1401L13.4627 2.07005ZM15.1312 3.26194C15.1108 3.05831 15.0912 2.85693 15.0626 2.6868C15.0324 2.50684 14.9828 2.29705 14.8725 2.08322L13.095 3C13.0721 2.95549 13.0769 2.93878 13.0902 3.01798C13.1052 3.10701 13.1181 3.23089 13.1411 3.46094L15.1312 3.26194ZM15.2261 4.21141C15.2894 4.29433 15.2693 4.33101 15.2342 4.13595C15.2008 3.95045 15.1739 3.68915 15.1312 3.26194L13.1411 3.46094C13.1805 3.85459 13.2152 4.20895 13.2658 4.49017C13.3147 4.76184 13.4009 5.11633 13.636 5.42445L15.2261 4.21141ZM15.2261 4.21141L15.2261 4.21141L13.636 5.42444C14.0718 5.99575 14.7806 6.28935 15.4928 6.19355L15.2261 4.21141ZM15.9646 3.60717C15.6323 3.87905 15.4286 4.04481 15.2738 4.15238C15.1111 4.26548 15.1228 4.22531 15.2261 4.21141L15.4928 6.19355C15.8768 6.14188 16.1885 5.95223 16.4152 5.7947C16.6498 5.63163 16.9249 5.4056 17.2311 5.15509L15.9646 3.60717ZM16.981 2.95661C16.7518 3.02983 16.5684 3.14308 16.4198 3.24897C16.2793 3.34907 16.123 3.47759 15.9646 3.60717L17.2311 5.15509C17.41 5.00869 17.5068 4.93022 17.5803 4.87784C17.6457 4.83124 17.6373 4.84651 17.5896 4.86175L16.981 2.95661ZM18.3848 3.02663C17.9408 2.83421 17.442 2.80934 16.981 2.95661L17.5896 4.86175L17.5896 4.86175L18.3848 3.02663ZM19.3314 3.77509C19.1867 3.6304 19.044 3.48696 18.9142 3.37338C18.7768 3.25323 18.6056 3.12228 18.3848 3.02663L17.5896 4.86175C17.5437 4.84184 17.5369 4.82581 17.5973 4.87869C17.6653 4.93813 17.7537 5.02583 17.9172 5.1893L19.3314 3.77509ZM20.2249 4.66856L19.3314 3.77509L17.9172 5.18931L18.8107 6.08277L20.2249 4.66856ZM20.9733 5.61516C20.8777 5.39441 20.7467 5.22316 20.6266 5.08581C20.513 4.95597 20.3696 4.81326 20.2249 4.66856L18.8106 6.08277C18.9741 6.24626 19.0618 6.33469 19.1213 6.40264C19.1742 6.46308 19.1581 6.45629 19.1382 6.41034L20.9733 5.61516ZM21.0434 7.01894C21.1906 6.55797 21.1658 6.05922 20.9733 5.61517L19.1382 6.41034L19.1382 6.41034L21.0434 7.01894ZM20.3928 8.03534C20.5224 7.87696 20.6509 7.72069 20.751 7.58019C20.8569 7.43156 20.9701 7.24814 21.0434 7.01895L19.1382 6.41033C19.1535 6.36263 19.1687 6.35427 19.1221 6.41968C19.0697 6.4932 18.9913 6.58992 18.8449 6.76886L20.3928 8.03534ZM19.7885 8.77387C19.7746 8.87723 19.7345 8.88894 19.8476 8.72619C19.9551 8.57141 20.1209 8.36764 20.3928 8.03534L18.8449 6.76886C18.5943 7.07506 18.3683 7.35016 18.2052 7.58481C18.0477 7.81148 17.8581 8.12317 17.8064 8.50724L19.7885 8.77387ZM19.7885 8.77387V8.77386L17.8064 8.50725C17.7106 9.21938 18.0042 9.92816 18.5755 10.364L19.7885 8.77387ZM20.738 8.86882C20.3108 8.82609 20.0495 8.79922 19.864 8.76584C19.6689 8.73073 19.7056 8.7106 19.7885 8.77387L18.5755 10.364C18.8836 10.599 19.2381 10.6853 19.5098 10.7342C19.791 10.7848 20.1454 10.8195 20.539 10.8589L20.738 8.86882ZM21.9168 9.1275C21.703 9.01721 21.4932 8.96759 21.3132 8.93737C21.1431 8.9088 20.9417 8.88918 20.738 8.86882L20.539 10.8589C20.7691 10.8819 20.893 10.8948 20.982 10.9098C21.0612 10.9231 21.0445 10.9279 21 10.905L21.9168 9.1275ZM22.8599 10.1696C22.682 9.71957 22.3469 9.34933 21.9168 9.1275L21 10.905L21 10.905L22.8599 10.1696ZM23 11.3682C23 11.1636 23.0005 10.9613 22.989 10.7891C22.9769 10.607 22.9484 10.3933 22.8599 10.1696L21 10.905C20.9816 10.8584 20.9881 10.8423 20.9935 10.9224C20.9995 11.0125 21 11.137 21 11.3682H23ZM23 12.6319V11.3682H21V12.6319H23ZM22.86 13.8302C22.9484 13.6065 22.9769 13.3929 22.989 13.2108C23.0005 13.0388 23 12.8365 23 12.6319H21C21 12.863 20.9995 12.9875 20.9935 13.0776C20.9881 13.1577 20.9816 13.1416 21 13.095L22.86 13.8302ZM21.9166 14.8726C22.3469 14.6507 22.682 14.2804 22.86 13.8302L21 13.095V13.095L21.9166 14.8726ZM20.7381 15.1312C20.9417 15.1108 21.1431 15.0912 21.3132 15.0626C21.4931 15.0324 21.7028 14.9828 21.9166 14.8726L21 13.095C21.0445 13.0721 21.0612 13.077 20.982 13.0902C20.893 13.1052 20.7691 13.1181 20.5391 13.1411L20.7381 15.1312ZM20.803 15.1225L20.803 15.1225L20.4742 13.1497L20.4742 13.1497L20.803 15.1225ZM19.7889 15.2261C19.706 15.2893 19.6693 15.2692 19.8644 15.2341C20.0498 15.2007 20.311 15.1739 20.7381 15.1312L20.5391 13.1411C20.1456 13.1805 19.7913 13.2151 19.5102 13.2657C19.2386 13.3146 18.8842 13.4008 18.5762 13.6357L19.7889 15.2261ZM19.7889 15.2261L19.7889 15.2261L18.5762 13.6357C18.0046 14.0716 17.7108 14.7807 17.8068 15.4931L19.7889 15.2261ZM20.3929 15.9643C20.1212 15.6322 19.9555 15.4285 19.8479 15.2738C19.7348 15.1111 19.775 15.1228 19.7889 15.2261L17.8068 15.4931C17.8585 15.877 18.0481 16.1886 18.2056 16.4152C18.3686 16.6497 18.5946 16.9247 18.845 17.2308L20.3929 15.9643ZM21.0433 16.9803C20.9701 16.7513 20.8569 16.5679 20.751 16.4193C20.651 16.2789 20.5225 16.1227 20.3929 15.9643L18.845 17.2308C18.9914 17.4097 19.0698 17.5064 19.1222 17.5799C19.1688 17.6453 19.1535 17.6369 19.1383 17.5892L21.0433 16.9803ZM20.9733 18.3846C21.1658 17.9404 21.1907 17.4415 21.0433 16.9803L19.1383 17.5892L19.1383 17.5892L20.9733 18.3846ZM20.225 19.3309C20.3697 19.1862 20.5131 19.0436 20.6266 18.9138C20.7467 18.7765 20.8776 18.6053 20.9733 18.3846L19.1383 17.5892C19.1582 17.5433 19.1742 17.5365 19.1213 17.5969C19.0619 17.6648 18.9742 17.7532 18.8108 17.9167L20.225 19.3309ZM19.3314 20.2245L20.225 19.3309L18.8108 17.9167L17.9172 18.8102L19.3314 20.2245ZM18.3849 20.9729C18.6056 20.8773 18.7769 20.7463 18.9142 20.6262C19.044 20.5126 19.1867 20.3692 19.3314 20.2245L17.9172 18.8103C17.7537 18.9737 17.6653 19.0614 17.5974 19.1209C17.5369 19.1737 17.5437 19.1577 17.5897 19.1378L18.3849 20.9729ZM16.981 21.0429C17.442 21.1902 17.9408 21.1653 18.3849 20.9729L17.5897 19.1378H17.5897L16.981 21.0429ZM15.9647 20.3924C16.1231 20.522 16.2793 20.6505 16.4198 20.7506C16.5684 20.8565 16.7519 20.9697 16.981 21.0429L17.5897 19.1378C17.6374 19.153 17.6457 19.1683 17.5803 19.1217C17.5068 19.0693 17.4101 18.9909 17.2312 18.8445L15.9647 20.3924ZM15.9732 20.3993L15.9732 20.3993L17.2226 18.8376L17.2226 18.8375L15.9732 20.3993ZM15.2262 19.7881C15.1228 19.7742 15.1111 19.7341 15.2738 19.8472C15.4286 19.9547 15.6324 20.1205 15.9647 20.3924L17.2311 18.8445C16.925 18.5939 16.6499 18.3679 16.4152 18.2048C16.1886 18.0473 15.8769 17.8577 15.4928 17.806L15.2262 19.7881ZM15.2262 19.7881H15.2262L15.4928 17.806C14.7807 17.7102 14.0719 18.0038 13.636 18.5751L15.2262 19.7881ZM15.1312 20.7378C15.1739 20.3105 15.2008 20.0492 15.2342 19.8636C15.2693 19.6685 15.2894 19.7052 15.2262 19.7882L13.636 18.5751C13.401 18.8832 13.3147 19.2378 13.2658 19.5094C13.2152 19.7907 13.1805 20.1451 13.1411 20.5388L15.1312 20.7378ZM14.8724 21.917C14.9828 21.7031 15.0324 21.4932 15.0626 21.3132C15.0912 21.143 15.1108 20.9415 15.1312 20.7378L13.1411 20.5388C13.1181 20.769 13.1052 20.8929 13.0902 20.982C13.0769 21.0612 13.072 21.0445 13.095 21L14.8724 21.917ZM13.8306 22.8598C14.2805 22.6819 14.6506 22.3469 14.8724 21.917L13.095 21L13.095 21L13.8306 22.8598ZM12.6316 23C12.8363 23 13.0387 23.0005 13.2109 22.989C13.393 22.9768 13.6068 22.9483 13.8306 22.8598L13.095 21C13.1416 20.9816 13.1577 20.9881 13.0776 20.9935C12.9875 20.9995 12.8629 21 12.6316 21V23ZM11.3682 23H12.6316V21H11.3682V23ZM10.1696 22.8599C10.3933 22.9484 10.607 22.9769 10.7891 22.989C10.9613 23.0005 11.1636 23 11.3682 23V21C11.137 21 11.0125 20.9995 10.9224 20.9935C10.8423 20.9881 10.8584 20.9816 10.905 21L10.1696 22.8599ZM9.1275 21.9168C9.34933 22.3469 9.71958 22.682 10.1696 22.8599L10.905 21L9.1275 21.9168ZM8.86882 20.7381C8.88918 20.9417 8.9088 21.1431 8.93737 21.3132C8.96759 21.4932 9.01721 21.703 9.1275 21.9168L10.905 21C10.9279 21.0445 10.9231 21.0612 10.9098 20.982C10.8948 20.893 10.8819 20.7691 10.8589 20.539L8.86882 20.7381ZM8.77387 19.7885C8.7106 19.7056 8.73073 19.6689 8.76584 19.864C8.79922 20.0495 8.82609 20.3108 8.86882 20.7381L10.8589 20.539C10.8195 20.1454 10.7848 19.791 10.7342 19.5098C10.6853 19.2381 10.599 18.8836 10.364 18.5755L8.77387 19.7885ZM8.77387 19.7885L10.364 18.5755C9.92815 18.0042 9.21939 17.7106 8.50728 17.8064L8.77387 19.7885ZM8.03531 20.3928C8.36763 20.1209 8.5714 19.9551 8.72619 19.8476C8.88895 19.7345 8.87724 19.7746 8.77387 19.7885L8.50727 17.8064C8.12318 17.858 7.81149 18.0477 7.58481 18.2052C7.35015 18.3683 7.07504 18.5944 6.76884 18.8449L8.03531 20.3928ZM8.06643 20.3663L8.06644 20.3663L6.73771 18.8714L6.7377 18.8715L8.06643 20.3663ZM7.01887 21.0434C7.24807 20.9702 7.4315 20.8569 7.58013 20.751C7.72064 20.6509 7.87691 20.5224 8.0353 20.3928L6.76883 18.8449C6.58988 18.9913 6.49316 19.0698 6.41963 19.1222C6.35422 19.1688 6.36258 19.1535 6.41029 19.1383L7.01887 21.0434ZM5.61515 20.9734C6.05919 21.1658 6.55791 21.1907 7.01887 21.0434L6.41029 19.1383L6.41029 19.1383L5.61515 20.9734ZM4.6685 20.2249C4.81321 20.3696 4.95592 20.513 5.08577 20.6266C5.22313 20.7468 5.39438 20.8777 5.61515 20.9734L6.41029 19.1383C6.45624 19.1582 6.46304 19.1742 6.40259 19.1213C6.33464 19.0619 6.2462 18.9742 6.08271 18.8107L4.6685 20.2249ZM3.77506 19.3315L4.6685 20.2249L6.08271 18.8107L5.18927 17.9172L3.77506 19.3315ZM3.02657 18.3848C3.12223 18.6056 3.25318 18.7768 3.37333 18.9142C3.48692 19.044 3.63036 19.1868 3.77506 19.3315L5.18928 17.9172C5.02579 17.7538 4.93809 17.6653 4.87864 17.5974C4.82577 17.5369 4.8418 17.5437 4.86171 17.5897L3.02657 18.3848ZM2.95656 16.9811C2.8093 17.4421 2.83417 17.9408 3.02657 18.3848L4.86171 17.5897V17.5897L2.95656 16.9811ZM3.60715 15.9647C3.47756 16.123 3.34903 16.2793 3.24892 16.4198C3.14303 16.5684 3.02977 16.7519 2.95656 16.9811L4.86171 17.5897C4.84647 17.6374 4.83119 17.6457 4.87779 17.5803C4.93018 17.5068 5.00865 17.4101 5.15506 17.2311L3.60715 15.9647ZM4.2114 15.2261C4.2253 15.1228 4.26548 15.1111 4.15237 15.2738C4.0448 15.4286 3.87903 15.6324 3.60715 15.9647L5.15506 17.2311C5.40558 16.9249 5.63162 16.6498 5.79469 16.4152C5.95222 16.1885 6.14188 15.8768 6.19355 15.4928L4.2114 15.2261ZM4.2114 15.2261L4.2114 15.2261L6.19355 15.4928C6.28934 14.7806 5.99575 14.0718 5.42445 13.636L4.2114 15.2261ZM3.26193 15.1312C3.68915 15.1739 3.95044 15.2008 4.13595 15.2342C4.33101 15.2693 4.29432 15.2894 4.2114 15.2261L5.42445 13.636C5.11633 13.4009 4.76184 13.3147 4.49017 13.2658C4.20894 13.2152 3.85458 13.1805 3.46093 13.1411L3.26193 15.1312ZM2.08323 14.8725C2.29705 14.9828 2.50683 15.0324 2.6868 15.0626C2.85693 15.0912 3.05831 15.1108 3.26193 15.1312L3.46094 13.1411C3.23089 13.1181 3.10701 13.1052 3.01798 13.0902C2.93878 13.0769 2.95549 13.0721 3 13.095L2.08323 14.8725ZM1.14009 13.8304C1.31803 14.2804 1.65311 14.6507 2.08323 14.8725L3 13.095H3L1.14009 13.8304ZM1 12.6318C1 12.8364 0.999483 13.0387 1.01098 13.2109C1.02314 13.393 1.05163 13.6066 1.14009 13.8304L3 13.095C3.01841 13.1416 3.01188 13.1577 3.00653 13.0776C3.00052 12.9875 3 12.863 3 12.6318H1ZM1 11.3683V12.6318H3V11.3683H1ZM1.14017 10.1694C1.05166 10.3932 1.02315 10.607 1.01098 10.7891C0.999483 10.9613 1 11.1637 1 11.3683H3C3 11.1371 3.00052 11.0125 3.00654 10.9224C3.01189 10.8423 3.01842 10.8584 3 10.905L1.14017 10.1694ZM2.08305 9.12757C1.65308 9.34939 1.3181 9.71954 1.14017 10.1694L3 10.905L3 10.905L2.08305 9.12757ZM3.26205 8.86881C3.05837 8.88917 2.85694 8.9088 2.68677 8.93737C2.50676 8.9676 2.29692 9.01724 2.08305 9.12757L3 10.905C2.95548 10.928 2.93877 10.9231 3.01798 10.9098C3.10704 10.8948 3.23094 10.8819 3.46105 10.8589L3.26205 8.86881ZM3.36155 8.86384H3.36155V10.8638H3.36155V8.86384ZM3.36156 8.86384H3.36155V10.8638H3.36156V8.86384ZM4.21177 8.77383C4.29471 8.71055 4.33141 8.73069 4.1363 8.7658C3.95075 8.7992 3.68939 8.82607 3.26205 8.86881L3.46106 10.8589C3.85482 10.8195 4.20927 10.7848 4.49056 10.7342C4.76231 10.6853 5.1169 10.5989 5.42506 10.3638L4.21177 8.77383ZM4.21177 8.77383L4.21178 8.77383L5.42506 10.3638C5.99613 9.92801 6.28962 9.21944 6.19396 8.50749L4.21177 8.77383ZM3.60732 8.03506C3.87929 8.36746 4.04511 8.5713 4.15272 8.72614C4.26586 8.88895 4.22567 8.87724 4.21177 8.77383L6.19396 8.50749C6.14234 8.1233 5.95263 7.81151 5.79506 7.58478C5.63195 7.35006 5.40584 7.07487 5.15523 6.76858L3.60732 8.03506ZM2.95652 7.01822C3.02973 7.24751 3.14303 7.43102 3.24896 7.5797C3.3491 7.72027 3.47768 7.8766 3.60732 8.03506L5.15523 6.76858C5.00876 6.58956 4.93026 6.49279 4.87785 6.41923C4.83123 6.35379 4.84651 6.36215 4.86175 6.40988L2.95652 7.01822ZM3.02651 5.61498C2.83424 6.05887 2.80938 6.5574 2.95652 7.01822L4.86175 6.40988L3.02651 5.61498ZM3.77523 4.66798C3.63047 4.81274 3.48698 4.9555 3.37335 5.08539C3.25316 5.2228 3.12217 5.39412 3.02651 5.61498L4.86175 6.40988C4.84184 6.45585 4.8258 6.46265 4.8787 6.40219C4.93816 6.33421 5.02589 6.24574 5.18944 6.0822L3.77523 4.66798ZM4.66855 3.77466L3.77523 4.66798L5.18944 6.0822L6.08276 5.18888L4.66855 3.77466ZM4.66855 3.77466L4.66855 3.77466L6.08276 5.18888L6.08276 5.18887L4.66855 3.77466ZM5.6152 3.02616C5.39443 3.12181 5.22317 3.25276 5.08582 3.37292C4.95597 3.48651 4.81325 3.62995 4.66855 3.77466L6.08276 5.18887C6.24625 5.02538 6.33469 4.93768 6.40264 4.87824C6.46309 4.82536 6.45629 4.84139 6.41034 4.8613L5.6152 3.02616ZM7.01892 2.95614C6.55795 2.80889 6.05923 2.83377 5.6152 3.02615L6.41033 4.8613H6.41034L7.01892 2.95614ZM8.03543 3.60681C7.87702 3.47719 7.72073 3.34865 7.58021 3.24853C7.43158 3.14264 7.24813 3.02936 7.01892 2.95614L6.41034 4.8613C6.36262 4.84606 6.35426 4.83078 6.41969 4.8774C6.49324 4.9298 6.58999 5.00829 6.76896 5.15472L8.03543 3.60681ZM8.77391 4.21101C8.87727 4.22493 8.88897 4.26509 8.72621 4.15198C8.57144 4.04441 8.36769 3.87865 8.03543 3.60681L6.76896 5.15472C7.07512 5.40521 7.35018 5.63122 7.58477 5.79427C7.81138 5.95176 8.123 6.14141 8.50697 6.19312L8.77391 4.21101ZM8.77391 4.21101L8.77391 4.21101L8.50697 6.19312C9.21932 6.28905 9.92836 5.99536 10.3642 5.42382L8.77391 4.21101ZM8.86883 3.2618C8.82612 3.6889 8.79926 3.95012 8.76589 4.13558C8.7308 4.33059 8.71068 4.29392 8.77391 4.21101L10.3642 5.42382C10.5992 5.11576 10.6854 4.76136 10.7343 4.48976C10.7849 4.20861 10.8196 3.85435 10.8589 3.46081L8.86883 3.2618ZM9.12739 2.08341C9.01716 2.29719 8.96756 2.50692 8.93736 2.68683C8.9088 2.85692 8.88919 3.05824 8.86883 3.2618L10.8589 3.46081C10.8819 3.23082 10.8948 3.10698 10.9098 3.01798C10.923 2.9388 10.9279 2.9555 10.905 3L9.12739 2.08341ZM10.1698 1.14002C9.71962 1.31796 9.34924 1.65315 9.12739 2.08341L10.905 3L10.905 3L10.1698 1.14002ZM11.3681 1C11.1635 1 10.9612 0.999483 10.7892 1.01097C10.6071 1.02313 10.3935 1.05161 10.1698 1.14002L10.905 3C10.8584 3.0184 10.8423 3.01188 10.9224 3.00653C11.0125 3.00052 11.137 3 11.3681 3V1ZM12.6318 1H11.3681V3H12.6318V1ZM13.8304 1.1401C13.6066 1.05163 13.393 1.02314 13.2109 1.01098C13.0387 0.999483 12.8364 1 12.6318 1V3C12.863 3 12.9875 3.00052 13.0776 3.00653C13.1577 3.01188 13.1416 3.01841 13.095 3L13.8304 1.1401ZM14.8725 2.08322C14.6507 1.65312 14.2804 1.31803 13.8304 1.1401L13.095 3L13.095 3L14.8725 2.08322ZM15 12C15 13.6569 13.6569 15 12 15V17C14.7614 17 17 14.7614 17 12H15ZM12 9C13.6569 9 15 10.3431 15 12H17C17 9.23858 14.7614 7 12 7V9ZM9 12C9 10.3431 10.3431 9 12 9V7C9.23858 7 7 9.23858 7 12H9ZM12 15C10.3431 15 9 13.6569 9 12H7C7 14.7614 9.23858 17 12 17V15Z"
                fill="#33363F"
              />
            </svg>
          </button-icon>

          <SettingsModal
            v-if="isSettingsOpen.modal"
            :select-item-function="handleClick"
            :active-index="isSettingsOpen.activeItem"
            :modal-items="modalItems"
            :click-outside="clickOutside"
            top="52"
            left="-250"
          >
            <div
              class="modal-item flex-container"
              style="justify-content: space-between"
              @click="openDragDrop($event)"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8 20L7.29289 20.7071L8 21.4142L8.70711 20.7071L8 20ZM10 5C10.5523 5 11 4.55228 11 4C11 3.44772 10.5523 3 10 3L10 5ZM3.29289 16.7071L7.29289 20.7071L8.70711 19.2929L4.70711 15.2929L3.29289 16.7071ZM8.70711 20.7071L12.7071 16.7071L11.2929 15.2929L7.29289 19.2929L8.70711 20.7071ZM9 20L9 6L7 6L7 20L9 20ZM9 6C9 5.44772 9.44771 5 10 5L10 3C8.34315 3 7 4.34315 7 6L9 6Z"
                  fill="#33363F"
                />
                <path
                  d="M16 4L15.2929 3.29289L16 2.58579L16.7071 3.29289L16 4ZM16 19L17 19L17 19L16 19ZM14 22C13.4477 22 13 21.5523 13 21C13 20.4477 13.4477 20 14 20L14 22ZM11.2929 7.29289L15.2929 3.29289L16.7071 4.70711L12.7071 8.70711L11.2929 7.29289ZM16.7071 3.29289L20.7071 7.29289L19.2929 8.70711L15.2929 4.70711L16.7071 3.29289ZM17 4L17 19L15 19L15 4L17 4ZM17 19C17 20.6569 15.6569 22 14 22L14 20C14.5523 20 15 19.5523 15 19L17 19Z"
                  fill="#33363F"
                />
              </svg>
              <span>Настроить карточку договора</span>
            </div>
          </SettingsModal>
        </div>
      </div>
    </div>

    <CAccordion always-open>
      <AccordionItemComponent :list="orderedList">
        <template #req>
          <CAccordionItem :item-key="1">
            <CAccordionHeader
              :class="hasGroupError.includes(1) ? `error-group` : ``"
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Реквизиты'"
            >
              <div class="title-accordion">Реквизиты</div>

              <div v-if="hasGroupError.includes(1)" class="error-group-message">
                Одно или несколько полей заполнены неверно !
              </div>
            </CAccordionHeader>
            <CAccordionBody>
              <div
                class="input-container"
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr 1fr;
                  gap: 10px;
                "
              >
                <div>
                  <input-item
                    :value="layoutStore.currentContract.NDOG"
                    name="kod"
                    :is-req="true"
                    label="Номер"
                    type="text"
                    :errors="errors"
                    :is-disabled="true"
                  />
                </div>
                <div style="margin-bottom: 15px">
                  <label class="form-label label">Подразделение *</label>
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      subDivisionsRef
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectSubdivision($event)">
                      <CDropdownItem v-for="item in subDivisions" :key="item">{{
                        item
                      }}</CDropdownItem>
                    </CDropdownMenu>
                  </CDropdown>
                </div>
                <div style="margin-bottom: 15px">
                  <label class="form-label label">Вид энергии/услуга *</label>
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      vidEnUslugaRef
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectVidEnUsluga($event)">
                      <CDropdownItem v-for="item in vidEnUsluga" :key="item">{{
                        item
                      }}</CDropdownItem>
                    </CDropdownMenu>
                  </CDropdown>
                </div>
              </div>
              <div class="input-item" style="width: 100%">
                <input-item
                  value="Эл-во энергоснабжения розница"
                  name="item"
                  :is-req="true"
                  label="Вид договора"
                  :errors="errors"
                  :is-disabled="true"
                  type="sprav"
                />
              </div>
              <div class="flex-container input-container">
                <div class="flex-container input-container">
                  <div class="input-item">
                    <input-item
                      value="Городской (местный)"
                      name="fin_source"
                      label="Источник финанс."
                      type="sprav"
                      :errors="errors"
                      :is-disabled="true"
                    />
                  </div>
                  <div class="input-item">
                    <input-item
                      :value="
                        currentContractFullData.ID_GK
                          ? currentContractFullData.ID_GK
                          : ''
                      "
                      name="id_gk"
                      label="Идентификатор гос. контракта"
                      type="text"
                      :errors="errors"
                    />
                  </div>
                  <div class="input-item">
                    <input-item
                      :value="currentContractFullData.IKZ"
                      name="code"
                      label="Ид. код"
                      type="text"
                      :errors="errors"
                      :is-disabled="true"
                    />
                  </div>
                </div>
              </div>
              <div class="flex-container input-container">
                <div class="input-item">
                  <input-item
                    :value="currentContractFullData.KODP_PLAT"
                    name="payer"
                    label="Плательщик"
                    type="sprav"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    :value="currentContractFullData.KODP_GRUZ"
                    name="gruz"
                    label="Грузополучатель"
                    type="sprav"
                    :errors="errors"
                  />
                </div>
              </div>
              <div
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;
                "
              >
                <input-item
                  v-model="form.es_id"
                  name="es_id"
                  label="Ид. внеш. системы"
                  type="text"
                  :errors="errors"
                  :is-disabled="true"
                />
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #dates>
          <CAccordionItem :item-key="2">
            <CAccordionHeader
              :class="hasGroupError.includes(4) ? `error-group` : ``"
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Даты'"
            >
              <div class="title-accordion">Даты</div>
              <div v-if="hasGroupError.includes(4)" class="error-group-message">
                Одно или несколько полей заполнены неверно !
              </div>
            </CAccordionHeader>
            <CAccordionBody>
              <div class="flex-container">
                <div class="input-item">
                  <input-item
                    :value="
                      layoutStore.currentContract.DATE_START.split('.')
                        .reverse()
                        .join('-')
                    "
                    name="start_date"
                    :is-req="true"
                    label="Начало действия"
                    type="date"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    v-model="form.planned_end_date"
                    name="planned_end_date"
                    :is-req="true"
                    label="Планируемое окончание"
                    type="date"
                    :errors="errors"
                  />
                </div>

                <div class="input-item">
                  <input-item
                    v-model="form.sign_date"
                    name="sign_date"
                    label="Подписан ЮЛ"
                    type="date"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    v-model="form.reg_date"
                    label="Регистрация (заключ.)"
                    name="reg_date"
                    type="date"
                    :errors="errors"
                  />
                </div>
              </div>
              <div class="flex-container">
                <div class="input-item">
                  <input-item
                    v-model="form.oferta_date"
                    name="oferta_date"
                    label="Дата направления оферты"
                    type="date"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    v-model="form.prolongation_date"
                    name="prolongation_date"
                    label="Пролонгация"
                    type="date"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    v-model="form.end_date"
                    name="end_date"
                    label="Прекращение"
                    type="date"
                    :errors="errors"
                  />
                </div>
                <div class="input-item">
                  <input-item
                    v-model="form.archive_date"
                    label="Архивация"
                    name="archive_date"
                    type="date"
                    :errors="errors"
                  />
                </div>
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #status>
          <CAccordionItem :item-key="3">
            <CAccordionHeader
              :class="hasGroupError.includes(3) ? `error-group` : ``"
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Статус'"
            >
              <div class="title-accordion">
                Статус <span>{{ currentStatus.name }}</span>
              </div>
              <div v-if="hasGroupError.includes(4)" class="error-group-message">
                Одно или несколько полей заполнены неверно !
              </div>
            </CAccordionHeader>
            <CAccordionBody>
              <div
                class="flex-container status-container"
                style="
                  display: grid;
                  grid-template-rows: auto 1fr;
                  margin-top: 10px;
                  position: relative;
                "
              >
                <div style="display: flex; justify-content: start">
                  <div
                    @click="changeStatusMode = !changeStatusMode"
                    :class="{ changeStatus: changeStatusMode }"
                    style="
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      width: 300px;
                      position: absolute;
                      z-index: 9999;
                      top: 0;
                      height: 34px;
                      background: rgb(255 255 255 / 94%);
                      cursor: pointer;
                      transition: all 0.5s ease;
                    "
                  >
                    {{
                      changeStatusMode
                        ? ""
                        : " Изменить статус"
                    }}
                  </div>
                  <customToggleItemVue
                    :items="names"
                    :select-item-func="selectStatus"
                    :selected-item="currentStatus"
                    :index="currentStatusIndex"
                  />
                </div>
                <div style="flex-grow: 1">
                  <label class="form-label label">Причина расторжения</label>
                  <textarea value="" @focus="initialStatus.id === currentStatus.id ? changeStatusMode = false : changeStatusMode = true"></textarea>
                </div>
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #banks>
          <CAccordionItem :item-key="4">
            <CAccordionHeader
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Банковские реквизиты'"
              :class="hasGroupError.includes(4) ? `error-group` : ``"
            >
              <div class="title-accordion">Банковские реквизиты</div>
              <div v-if="hasGroupError.includes(4)" class="error-group-message">
                Одно или несколько полей заполнены неверно !
              </div>
            </CAccordionHeader>
            <CAccordionBody>
              <div class="reciever">Банк получателя</div>
              <div
                style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px"
              >
                <input-item
                  :value="currentContractFullData.BANK_POL"
                  name="reciever_bank"
                  :is-req="true"
                  label="Банк"
                  type="sprav"
                  :errors="errors"
                  :is-disabled="true"
                />
                <input-item
                  :value="currentContractFullData.RS_B_POL"
                  label="Расчетный счет"
                  type="text"
                  :errors="errors"
                />
              </div>
              <div>
                <div
                  class="flex-container inputs-container"
                  style="display: grid; grid-template-columns: 1fr 3fr 2fr"
                >
                  <input-item
                    :value="currentContractFullData.BIC_B_POL"
                    name="reciever_bik"
                    label="БИК"
                    type="text"
                    :is-disabled="true"
                    :errors="errors"
                  />
                  <input-item
                    label="Адрес"
                    type="text"
                    :errors="errors"
                    :value="currentContractFullData.ADR_B_POL"
                    :is-disabled="true"
                  />
                  <input-item
                    label="Кор. счет"
                    :value="currentContractFullData.KS_B_POL"
                    type="text"
                    :errors="errors"
                  />
                </div>
              </div>

              <div class="payer">Банк плательщика</div>
              <div
                style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px"
              >
                <input-item
                  :value="currentContractFullData.BANK_PLAT"
                  name="reciever_bank"
                  :is-req="true"
                  label="Банк"
                  type="sprav"
                  :errors="errors"
                />
                <input-item
                  :value="currentContractFullData.RS_B_POL"
                  label="Расчетный счет"
                  type="text"
                  :errors="errors"
                />
              </div>
              <div>
                <div
                  class="flex-container inputs-container"
                  style="
                    display: grid;
                    grid-template-columns: 1fr 3fr 2fr;
                    gap: 10px;
                  "
                >
                  <input-item
                    name="reciever_bik"
                    label="БИК"
                    :value="currentContractFullData.BIC_B_PL"
                    :is-disabled="true"
                    type="text"
                    :errors="errors"
                  />
                  <input-item
                    label="Адрес"
                    :value="currentContractFullData.ADR_B_PL"
                    type="text"
                    :errors="errors"
                    :is-disabled="true"
                  />
                  <input-item
                    label="Кор. счет"
                    :value="currentContractFullData.KS_B_PL"
                    type="text"
                    :errors="errors"
                  />
                </div>
              </div>
              <div
                style="display: grid; grid-template-columns: 1fr 5fr; gap: 10px"
              >
                <input-item
                  label="Доп банковский счет"
                  type="text"
                  :errors="errors"
                  :is-disabled="true"
                />
                <input-item
                  label="Доп. счета ЮЛ"
                  type="sprav"
                  :errors="errors"
                  :is-disabled="true"
                />
              </div>
              <div
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px"
              >
                <input-item
                  value="Отделение по Ленинскому и Первомайскому районам г. Владивсотока УФК по ПКОтделение по Ленинскому и Первомайскому районам г. Владивсотока УФК по ПКОтделение по Фрунзенксому р-ну г."
                  label="Казначейство"
                  type="sprav"
                  :errors="errors"
                />
                <input-item
                  label="№лиц. счета"
                  :value="'40702810700000000077'"
                  type="text"
                  :errors="errors"
                />
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #reform>
          <CAccordionItem :item-key="5">
            <CAccordionHeader
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Переоформления'"
            >
              <div class="title-accordion">Переоформления</div>
            </CAccordionHeader>
            <CAccordionBody>
              <div class="flex-container">
                <div
                  class="input-item"
                  style="margin-bottom: 15px; position: relative"
                >
                  <p
                    style="
                      position: absolute;
                      right: 10px;
                      top: 8px;
                      line-height: 16px;
                      border-bottom: 1px solid #ff7819;
                      color: #ff7819;
                      font-weight: 600;
                      font-size: 12px;
                      cursor: pointer;
                    "
                  >
                    Открыть договор
                  </p>
                  <input-item
                    :value="form.reformFrom"
                    name="reformFrom"
                    label="Договор переоформлен с договора №"
                    type="text"
                    :is-disabled="true"
                    :errors="errors"
                  />
                </div>
                <div class="input-item" style="position: relative">
                  <p
                    style="
                      position: absolute;
                      right: 10px;
                      top: 8px;
                      line-height: 16px;
                      border-bottom: 1px solid #ff7819;
                      color: #ff7819;
                      font-weight: 600;
                      font-size: 12px;
                      cursor: pointer;
                    "
                  >
                    Открыть договор
                  </p>
                  <input-item
                    :value="`6061 T`"
                    name="reformTo"
                    label="Договор переоформлен на договор №"
                    type="text"
                    :is-disabled="true"
                    :errors="errors"
                  />
                </div>
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #finance>
          <CAccordionItem :item-key="6">
            <CAccordionHeader
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Финансы'"
            >
              <div class="title-accordion">Финансы</div>
            </CAccordionHeader>
            <CAccordionBody>
              <div
                class="fin-container"
                style="
                  display: grid;
                  margin: 0;
                  grid-template-columns: 2fr 2fr 1fr;
                  align-items: center;
                  gap: 10px;
                "
              >
                <div style="margin-bottom: 15px; position: relative">
                  <CFormLabel
                    class="label"
                    for="exampleFormControlPassword"
                    style="margin-top: 10px"
                  >
                    Тип док-та начислений
                  </CFormLabel>
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      typeDoc
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectDocType($event)">
                      <CDropdownItem>УПД</CDropdownItem>
                      <CDropdownItem>СФ</CDropdownItem>
                    </CDropdownMenu>
                  </CDropdown>
                  <svg
                    style="right: 32px; top: 37px; z-index: 8"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 10 10"
                    fill="none"
                    :class="['clear-field']"
                    @click="clearField('typeDoc')"
                  >
                    <g clip-path="url(#clip0_27_272)">
                      <path
                        d="M6.54663 3.01147L4.99999 4.5581L3.45335 3.01147L3.01147 3.45335L4.5581 4.99999L3.01147 6.54663L3.45335 6.98851L4.99999 5.44188L6.54663 6.98851L6.98851 6.54663L5.44188 4.99999L6.98851 3.45335L6.54663 3.01147Z"
                        fill="black"
                      />
                      <path
                        d="M5 0C2.23846 0 0 2.23846 0 5C0 7.76154 2.23846 10 5 10C7.76154 10 10 7.76154 10 5C10 2.23846 7.76154 0 5 0ZM5 9.21875C2.66998 9.21875 0.78125 7.33002 0.78125 5C0.78125 2.66998 2.66998 0.78125 5 0.78125C7.33002 0.78125 9.21875 2.66998 9.21875 5C9.21875 7.33002 7.33002 9.21875 5 9.21875Z"
                        fill="black"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_27_272">
                        <rect width="10" height="10" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </div>
                <div class="input-item">
                  <input-item
                    :value="currentContractFullData.PREF_FAC"
                    label="Префикс № счет-фактуры"
                    type="text"
                    :errors="errors"
                  />
                </div>
                <p class="ecp">Есть ЭЦП</p>
              </div>
              <div
                class="input-container"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px"
              >
                <div style="margin-bottom: 15px; position: relative">
                  <label class="form-label label"
                    >Тип основного плат. док-та</label
                  >
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      typeOsnPlatDocRef
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectTypeOsnPlatDoc($event)">
                      <CDropdownItem
                        v-for="item in typeOsnPlatDoc"
                        :key="item"
                        >{{ item }}</CDropdownItem
                      >
                    </CDropdownMenu>
                  </CDropdown>
                </div>
                <div style="margin-bottom: 15px; position: relative">
                  <label class="form-label label"
                    >Состояние плат. док-та по умолч.</label
                  >
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      sostPlatDocRef
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectSostPlatDoc($event)">
                      <CDropdownItem v-for="item in sostPlatDoc" :key="item">{{
                        item
                      }}</CDropdownItem>
                    </CDropdownMenu>
                  </CDropdown>
                  <svg
                    style="right: 32px; top: 40px; z-index: 8"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 10 10"
                    fill="none"
                    :class="['clear-field']"
                    @click="clearField('sostPlatDocRef')"
                  >
                    <g clip-path="url(#clip0_27_272)">
                      <path
                        d="M6.54663 3.01147L4.99999 4.5581L3.45335 3.01147L3.01147 3.45335L4.5581 4.99999L3.01147 6.54663L3.45335 6.98851L4.99999 5.44188L6.54663 6.98851L6.98851 6.54663L5.44188 4.99999L6.98851 3.45335L6.54663 3.01147Z"
                        fill="black"
                      />
                      <path
                        d="M5 0C2.23846 0 0 2.23846 0 5C0 7.76154 2.23846 10 5 10C7.76154 10 10 7.76154 10 5C10 2.23846 7.76154 0 5 0ZM5 9.21875C2.66998 9.21875 0.78125 7.33002 0.78125 5C0.78125 2.66998 2.66998 0.78125 5 0.78125C7.33002 0.78125 9.21875 2.66998 9.21875 5C9.21875 7.33002 7.33002 9.21875 5 9.21875Z"
                        fill="black"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_27_272">
                        <rect width="10" height="10" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </div>
              </div>
              <div
                class="input-container"
                style="
                  display: grid;
                  grid-template-columns: 2fr 2fr 1fr;
                  gap: 15px;
                "
              >
                <div class="input-item" style="width: 100%">
                  <input-item
                    value="20 дня(дней) после выставления  платежного документа"
                    label="Дни до наступления задолжности"
                    type="sprav"
                    :errors="errors"
                    :is-disabled="true"
                  />
                </div>
                <div style="margin-bottom: 15px; position: relative">
                  <label class="form-label label">Тип оплаты</label>
                  <CDropdown>
                    <CDropdownToggle :trigger="click" color="primary">{{
                      payTypeRef
                    }}</CDropdownToggle>
                    <CDropdownMenu @click="selectPayType($event)">
                      <CDropdownItem v-for="item in payType" :key="item">{{
                        item
                      }}</CDropdownItem>
                    </CDropdownMenu>
                  </CDropdown>
                  <svg
                    style="right: 32px; top: 42px; z-index: 8"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 10 10"
                    fill="none"
                    :class="['clear-field']"
                    @click="clearField('payTypeRef')"
                  >
                    <g clip-path="url(#clip0_27_272)">
                      <path
                        d="M6.54663 3.01147L4.99999 4.5581L3.45335 3.01147L3.01147 3.45335L4.5581 4.99999L3.01147 6.54663L3.45335 6.98851L4.99999 5.44188L6.54663 6.98851L6.98851 6.54663L5.44188 4.99999L6.98851 3.45335L6.54663 3.01147Z"
                        fill="black"
                      />
                      <path
                        d="M5 0C2.23846 0 0 2.23846 0 5C0 7.76154 2.23846 10 5 10C7.76154 10 10 7.76154 10 5C10 2.23846 7.76154 0 5 0ZM5 9.21875C2.66998 9.21875 0.78125 7.33002 0.78125 5C0.78125 2.66998 2.66998 0.78125 5 0.78125C7.33002 0.78125 9.21875 2.66998 9.21875 5C9.21875 7.33002 7.33002 9.21875 5 9.21875Z"
                        fill="black"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_27_272">
                        <rect width="10" height="10" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </div>
                <div
                  class="input-item"
                  style="
                    margin-top: 10px;
                    width: 100%;
                    display: flex;
                    align-items: center;
                  "
                >
                  <input
                    id="flexCheckChecked"
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    checked
                    :errors="errors"
                  />
                  <CFormLabel
                    class="label label-check"
                    for="exampleFormControlPassword"
                  >
                    Искл. автомат. разноса оплат
                  </CFormLabel>
                </div>
              </div>
            </CAccordionBody>
          </CAccordionItem>
        </template>
        <template #adresses>
          <CAccordionItem :item-key="5">
            <CAccordionHeader
              @mouseleave="hoveredGroup = ''"
              @mouseenter="hoveredGroup = 'Адреса'"
            >
              <div class="title-accordion">Адреса</div>
            </CAccordionHeader>
            <CAccordionBody>
              <input-item
                value="620219 Свердловская обл, Екатеринбург г, Мамина-Сибиряка ул, д.85 оф. 29"
                label="Местонахождения"
                type="sprav"
                :errors="errors"
                :is-copy="true"
              />
              <input-item label="Для переписки" type="sprav" :errors="errors" />
            </CAccordionBody>
          </CAccordionItem>
        </template>
      </AccordionItemComponent>
    </CAccordion>
    <div
      v-if="isSettingsOpen.dragDrop === 1"
      id="openCustomModal"
      class="custom-modal"
    >
      <div v-click-outside="clickOutside" class="custom-modal-dialog">
        <div class="custom-modal-content">
          <div class="custom-modal-header">
            <div style="display: flex; align-items: center">
              <h3 class="custom-modal-title">Договор</h3>
              <span>Измените порядок групп</span>
            </div>
            <div>
              <button class="save-button" @click="saveOrder(event)">
                Сохранить
              </button>

              <button class="reset-button" @click="clickOutside">Отмена</button>
            </div>
          </div>
          <div class="custom-modal-body">
            <VueDraggableNext
              :class="['dragArea', 'list-group', 'w-full', dragdropListSize]"
              :list="list"
              ghost-class="ghost"
              @change="onDragDropChange($event)"
            >
              <div
                v-for="(element, index) in list"
                :key="element.name"
                :class="[
                  'list-group-item',
                  element.isOpen && 'list-group-item-opened',
                ]"
                style="border: 1px solid #d1d1d1"
                @click="list[index].isOpen = !list[index].isOpen"
              >
                {{ element.name }}
                <svg
                  :style="`transform: ${
                    element.isOpen ? ' rotate(0deg)' : 'rotate(180deg)'
                  };`"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M18 15L12 9L6 15"
                    stroke="#33363F"
                    stroke-width="2"
                  />
                </svg>

                <div
                  v-if="element.isOpen"
                  style="
                    font-size: 12px;
                    padding: 0px 4px;
                    width: fit-content;
                    min-width: 100px;
                  "
                >
                  Раскрыта
                </div>
              </div>
            </VueDraggableNext>
          </div>
        </div>
      </div>
    </div>
</form>
<SpravModal />
</template>

<script>
export default {
  name: "ContractCardView",
  components: {},
};
</script>

<script setup>
import {
  CAccordion,
  CAccordionItem,
  CAccordionHeader,
  CAccordionBody,
  CBreadcrumb,
  CBreadcrumbItem,
  CDropdown,
  CDropdownToggle,
  CDropdownMenu,
  CDropdownItem,
} from "@coreui/vue";
import {
  ref,
  reactive,
  provide,
  computed,
  defineProps,
  watch,
  defineExpose,
  inject,
  onMounted,
} from "vue";
import SettingsModal from "@/components/settings-modal.vue";
import "@coreui/coreui/dist/css/coreui.min.css";
import AccordionItemComponent from "@/components/accordion-item-component.vue";
import inputItem from "@/components/input-item.vue";
import buttonIcon from "@/components/button-icon.vue";
import SpravModal from '@/components/sprav-modal.vue';
import "@coreui/coreui/dist/css/coreui.min.css";
import { VueDraggableNext } from "vue-draggable-next";
import contractCards from "../data/contract_cards.json";
import customToggleItemVue from "@/components/custom-toggle-item.vue";

const props = defineProps({
  scrolledDistance: {
    type: Number,
    default: 0,
  },
  currentContractId: {
    type: Object,
    default: () => {},
  },
  currentContragent: {
    type: Object,
    default: () => {},
  },
});
const layoutStore = inject("layoutStore");
const list = ref(props.list);
const spravPopupVisible = ref(false);
provide('spravPopupVisible', spravPopupVisible)
const dragdropListSize = ref("");
const statuses = [
  { id: 0, name: "Активный" },
  { id: 1, name: "Архивный" },
  { id: 2, name: "Новый" },
];
const orderedList = ref([
  {
    id: 1,
    order: 1,
    isOpen: true,
    name: "Реквизиты",
    slotName: "req",
  },
  {
    id: 2,
    order: 2,
    isOpen: false,
    name: "Даты",
    slotName: "dates",
  },
  {
    id: 3,
    order: 3,
    isOpen: true,
    name: "Статус",
    slotName: "status",
  },
  {
    id: 4,
    order: 4,
    isOpen: false,
    name: "Банковские реквизиты",
    slotName: "banks",
  },
  {
    id: 5,
    order: 5,
    isOpen: true,
    name: "Переоформления",
    slotName: "reform",
  },
  {
    id: 6,
    order: 6,
    isOpen: false,
    name: "Финансы",
    slotName: "finance",
  },
  {
    id: 7,
    order: 7,
    isOpen: false,
    name: "Адреса",
    slotName: "adresses",
  },
]);

onMounted(() => {
  const ordered = window.localStorage.getItem("list");
  if (!ordered) {
    list.value = props.list;
    console.log(orderedList.value);
  } else {
    orderedList.value = JSON.parse(ordered);
    list.value = JSON.parse(ordered);
    if (list.value.length <= 7) {
      dragdropListSize.value = "small-size";
    }
    if (list.value.length > 7) {
      dragdropListSize.value = "medium-size";
    }
    if (list.value.length > 15) {
      dragdropListSize.value = "big-size";
    }
  }
  const currentStatus = statuses.find(
    (el) => el.id === layoutStore.currentContract.ACTIVE_DOG
  );
    const initialStatus = statuses.find(
    (el) => el.id === layoutStore.currentContract.ACTIVE_DOG
  );
  currentStatus.value = currentStatus;
  initialStatus.value = initialStatus;
});



const saveOrder = () => {
  orderedList.value = list.value;
  window.localStorage.setItem("list", JSON.stringify(list.value));
  clickOutside();
};

watch(list, () => {
  let buttons = document.querySelectorAll(".accordion-button");
  for (let i = 0; i <= buttons.length - 1; i++) {
    const buttonTitle = buttons[i].firstChild.textContent;
    const currentItemInList = list.value.find(
      (el) => el.name === buttonTitle || buttonTitle.includes(el.name)
    );
    if (currentItemInList && list.value) {
      if (
        currentItemInList.isOpen &&
        buttons[i].classList.value.includes("collapsed")
      ) {
        buttons[i].click();
      }
      if (
        !currentItemInList.isOpen &&
        !buttons[i].classList.value.includes("collapsed")
      ) {
        buttons[i].click();
      }
    }
  }
});

const currentContractFullData = computed(() => {
  console.log(
    contractCards.filter(
      (el) => el.NDOG === layoutStore.currentContract.NDOG
    )[0]
  );
  const contract = contractCards.filter(
    (el) => el.KOD_DOG === layoutStore.currentContract.KOD_DOG
  )[0];
  return contract ? contract : contractCards[0];
});

const names = statuses.filter((item) => item.name);
const type_docs = ["УПД", "СФ"];
const subDivisions = ["ТЭ-ЗГРЭС ОПТЭ", "ТЭwe-ЗГРЭС ОПТЭ", "sdfsdТЭ-ЗГРЭС ОПТЭ"];
const vidEnUsluga = ["Тепловой", "Электрический", "Паровой", "Бытовой"];
const typeOsnPlatDoc = ["счет", "инкассовое получение"];
const sostPlatDoc = ["отзыв", "задержан", "принят", "отклонен"];
const payType = ["через банк", "через кассу"];
const modalItems = [
  "Режим настроек по умолчанию",
  "Режим пользовательских настроек",
];
const isModalOpen = inject("isModalOpen");
const isSettingsOpen = reactive({
  modal: false,
  activeItem: 1,
  dragDrop: isModalOpen.value,
});

const openDragDrop = (event) => {
  event.stopPropagation();
  isSettingsOpen.dragDrop = 1;
};
let sostPlatDocRef = ref(sostPlatDoc[0]);
let payTypeRef = ref(payType[0]);
let typeDoc = ref(type_docs[0]);
let typeOsnPlatDocRef = ref(typeOsnPlatDoc[0]);
let vidEnUslugaRef = ref(
  currentContractFullData.value.TEP_EL === 1 ? "Тепловой" : "Электрический"
);
let subDivisionsRef = ref(currentContractFullData.value.PODR_NAME);
let payerGroupHasErrorsRef = ref(false);
let submittedForm = ref(false);
const errorGroups = ref([]);
const hoveredGroup = ref("");
let currentStatus = reactive({ name: "", id: -1 });
let initialStatus = reactive({ name: "", id: -1 });
provide("currentStatus", currentStatus);
watch(() => {
  subDivisionsRef.value = currentContractFullData.value.PODR_NAME;
  let newStatus = statuses.find(
    (el) => el.id === layoutStore.currentContract.ACTIVE_DOG
  );
  currentStatus.name = newStatus.name;
  currentStatus.id = newStatus.id;
});
onMounted(() => {
  let newStatus = statuses.find(
    (el) => el.id === layoutStore.currentContract.ACTIVE_DOG
  );
  currentStatus.name = newStatus.name;
  currentStatus.id = newStatus.id;
  initialStatus.id = newStatus.id;
});

provide("submittedForm", submittedForm.value);
provide("currentStatus", currentStatus);
provide("isSettingsDragDropOpen", isSettingsOpen);

const currentStatusIndex = computed(() => {
  let status = statuses.findIndex((el) => {
    return el.id === currentStatus.id;
  });
  console.log("index", status);
  return status;
});

const selectStatus = (event) => {
  const id = statuses.find((el) => event.target.textContent === el.name);
  currentStatus.name = event.target.textContent;
  currentStatus.id = id.id;
};

const openSettings = () => {
  isSettingsOpen.modal = !isSettingsOpen.modal;
};

const selectSostPlatDoc = (event) => {
  sostPlatDocRef.value = event.target.textContent;
};

const selectPayType = (event) => {
  payTypeRef.value = event.target.textContent;
};

const selectVidEnUsluga = (event) => {
  vidEnUslugaRef.value = event.target.textContent;
};

const clickOutside = () => {
  isSettingsOpen.modal = false;
  isSettingsOpen.dragDrop = 0;
};

const handleClick = (index) => {
  isSettingsOpen.activeItem = index;
  setTimeout(() => {
    clickOutside();
  }, 100);
};

const selectSubdivision = (event) => {
  subDivisionsRef.value = event.target.textContent;
};

const selectTypeOsnPlatDoc = (event) => {
  typeOsnPlatDocRef.value = event.target.textContent;
};

const clearField = (refName) => {
  switch (refName) {
    case "sostPlatDocRef": {
      sostPlatDocRef.value = "";
      break;
    }
    case "payTypeRef": {
      payTypeRef.value = "";
      break;
    }
    case "typeDoc": {
      typeDoc.value = "";
      break;
    }
    case "typeOsnPlatDocRef": {
      typeOsnPlatDocRef.value = "";
      break;
    }
    case "vidEnUslugaRef": {
      vidEnUslugaRef.value = "";
      break;
    }
    case "subDivisionsRef": {
      subDivisionsRef.value = "";
      break;
    }
  }
};

const selectDocType = (event) => {
  typeDoc.value = event.target.textContent;
};
const payerGroupHasErrors = () => {
  if (submittedForm.value === true) {
    for (let key in errors) {
      if (errors[key] === "error") {
        payerGroupHasErrorsRef.value = true;
        break;
      }
    }
  }
  payerGroupHasErrorsRef.value = false;
};

const hasGroupError = computed(() => {
  return errorGroups.value;
});

const openGroupsByAccordionButtonsClick = (list) => {
  let buttons = document.querySelectorAll(".accordion-button");
  if (buttons) {
    for (let i = 0; i <= buttons.length - 1; i++) {
      const buttonTitle = buttons[i].firstChild.textContent;
      const currentItemInList = list.find(
        (el) => el.name === buttonTitle || buttonTitle.includes(el.name)
      );
      if (currentItemInList) {
        if (
          currentItemInList.isOpen &&
          buttons[i].classList.value.includes("collapsed")
        ) {
          buttons[i].click();
        }
        if (
          !currentItemInList.isOpen &&
          !buttons[i].classList.value.includes("collapsed")
        ) {
          buttons[i].click();
        }
      }
    }
  }
};

watch(isSettingsOpen, () => {
  if (isSettingsOpen.modal === true) {
    return;
  }
  const defaultListOrder = window.localStorage.getItem("defaultListOrder");
  const list = window.localStorage.getItem("list");
  if (isSettingsOpen.activeItem === 0 && defaultListOrder) {
    orderedList.value = JSON.parse(defaultListOrder);
    openGroupsByAccordionButtonsClick(JSON.parse(defaultListOrder));
  }
  if (isSettingsOpen.activeItem === 1) {
    orderedList.value = JSON.parse(list);
    openGroupsByAccordionButtonsClick(JSON.parse(list));
  }
});
watch(currentStatus, () => {
  console.log("currentStatus1, currentStatus2", initialStatus.id);
});
const validateForm = () => {
  console.log(submittedForm);
  for (let key in errors) {
    errors[key] = "";
    errorGroups.value = [];
  }
  for (let key in form) {
    if (
      form[key] === "" &&
      (key === "kod" ||
        key === "item" ||
        key === "type" ||
        key === "start_date" ||
        key === "planned_end_date")
    ) {
      errors[key] = "error";
      errorGroups.value.push(1);
    }
    if (form[key] === "" && (key === "payer_bank" || key === "reciever_bank")) {
      errors[key] === "error";
      errorGroups.value.push(4);
    }
  }
  const nodes = document.getElementsByClassName("accordion-collapse");
  for (let item of nodes) {
    item.classList.remove("show");
  }
  const buttons = document.getElementsByClassName("accordion-button");
  for (let item of buttons) {
    if (!item.classList.value.includes("collapsed")) item.click();
    item.classList.add("collapsed");
    item.setAttribute("aria-expanded", false);
  }
  submittedForm.value = true;
  payerGroupHasErrors();
};

defineExpose({
  isSettingsOpen,
});
let changeStatusMode = ref(false);
const form = reactive({
  kod: "",
  subdivision: "",
  id_gk: "",
  type: "",
  item: "",
  code: "",
  es_id: "",
  fin_source: "",
  payer: "",
  gruz: "",
  start_date: "",
  planned_end_date: "",
  end_date: "",
  archive_date: "",
  prolongation_date: "",
  sign_date: "",
  reg_date: "",
  oferta_date: "",
  reformFrom: "",
  reformTo: "",
  payer_bank: "",
  reciever_bank: "",
});

const errors = reactive({
  kod: "",
  subdivision: "",
  id_gk: "",
  type: "",
  item: "",
  code: "",
  es_id: "",
  fin_source: "",
  payer: "",
  gruz: "",
  start_date: "",
  planned_end_date: "",
  end_date: "",
  archive_date: "",
  prolongation_date: "",
  sign_date: "",
  reg_date: "",
  oferta_date: "",
  reformFrom: "",
  reformTo: "",
  payer_bank: "",
  reciever_bank: "",
});

watch((dragDrop) => {
  console.log(dragDrop);
  for (let key in errors) {
    errors[key] = "";
    errorGroups.value = [];
  }
});
</script>

<style lang="scss">
@import "/node_modules/@coreui/coreui/scss/functions";
@import "/node_modules/@coreui/coreui/scss/variables";
@import "/node_modules/@coreui/coreui/scss/maps";
@import "/node_modules/@coreui/coreui/scss/mixins";
@import "/node_modules/@coreui/coreui/scss/root";
@import "../themes/generated/variables.base.scss";
@import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,400&display=swap");
$accordion-transition: $btn-transition, border-radius 0.15s ease;
.ghost {
  opacity: 1 !important;
  background-color: #ff791938 !important;
  .list-group-item {
    color: white;
  }
}
.visisble {
  visibility: visible;
}
.hidden {
  visibility: hidden;
}
.small-size {
  .list-group-item {
    font-size: 16px;
    padding: 10px;
  }
}
.medium-size {
  .list-group-item {
    font-size: 14px;
    padding: 6px;
  }
}
.big-size {
  .list-group-item {
    font-size: 13px;
    padding: 6px;
  }
}
.list-group-item-opened {
  background: #ff781926 !important;
}
.custom-modal {
  position: fixed; /* фиксированное положение */
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: rgba(0, 0, 0, 0.466); /* цвет фона */
  z-index: 1050; /* по умолчанию модальное окно прозрачно */
  -webkit-transition: opacity 200ms ease-in;
  -moz-transition: opacity 200ms ease-in;
  transition: opacity 200ms ease-in; /* анимация перехода */
  margin: 0;
  padding: 0;
  pointer-events: auto;
}
/* при отображении модального окно */
.custom-modal:target {
  opacity: 1; /* делаем окно видимым */
  pointer-events: auto; /* элемент видим для событий мыши */
  overflow-y: auto; /* добавляем прокрутку по y, когда элемент не помещается на страницу */
}
/* ширина модального окна и его отступы от экрана */
.custom-modal-dialog {
  position: relative;
  width: auto;
  margin: 20px auto 30px;
  height: 95%;
}

.list-group-item:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
@media (min-width: 576px) {
  .custom-modal-dialog {
    width: 672px;
  }
}
/* свойства для блока, содержащего контент модального окна */
.custom-modal-content {
  position: relative;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  background-color: #fff;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  border-radius: 5px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  outline: 0;
  height: 100%;
}
@media (min-width: 768px) {
  .custom-modal-content {
    height: 100%;
  }
}
/* свойства для заголовка модального окна */
.custom-modal-header {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: justify;
  -webkit-justify-content: space-between;
  -ms-flex-pack: justify;
  justify-content: space-between;
  padding: 15px 35px;
  border-bottom: 1px solid #eceeef;
  display: flex;
  justify-content: space-between;
  h3 {
    margin-right: 10px;
    align-items: center;
    margin-bottom: 0;
    display: inline-block;
  }
  span {
    display: inline-block;
    margin-left: 20px;
    font-weight: 600;
  }
  .save-button {
    margin-right: 10px;
    border-radius: 5px;
    font-size: 13px;
    padding: 6px 14px;
    font-weight: 500;
    background: #ff7819;
    color: white;
    border: none;
    outline: none;
    z-index: 66;
  }
  .reset-button {
    font-size: 13px;
    border-radius: 5px;
    padding: 6px 14px;
    font-weight: 500;
    color: #445566;
    background: transparent;
  }
}
.custom-modal-title {
  font-size: 24px !important;
  color: #445566;
  font-weight: bold !important;
}
/* свойства для кнопки "Закрыть" при нахождении её в фокусе или наведении */
.custom-close:focus,
.close:hover {
  color: #000;
  text-decoration: none;
  cursor: pointer;
  opacity: 0.75;
}

.list-group-item {
  padding: 16px 20px;
  border: none;
}
/* свойства для блока, содержащего основное содержимое окна */
.custom-modal-body {
  position: relative;
  -webkit-box-flex: 1;
  -webkit-flex: 1 1 auto;
  -ms-flex: 1 1 auto;
  flex: 1 1 auto;
  padding: 15px;
  overflow: auto;
  .list-group-item {
    border-radius: 4px;
    cursor: pointer;
  }
}
.dragArea {
  border-radius: 0px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
}
.contract-form {
  margin-right: 15px;
  background: white;
  padding-top: 0;
  font-family: "Montserrat";
  flex-grow: 1;
  font-weight: 500;
  line-height: 24px;
  padding-bottom: 30px;
  border: 2px solid #dbdbdb;
  border-top: 3px solid transparent;
  display: flex;
  flex-direction: column;
}
.btn-group {
  display: block;
  min-width: 200px;
}
.status-container {
  align-items: center;
  gap: 30px;
  .changeStatus {
    transition: all 0.5s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: start !important;
    width: 128px !important;
    position: absolute;
    z-index: 9999;
    top: 0px;
    height: 34px;
    width: 350px !important;
    margin-left: 350px;
    background: rgb(255 255 255 / 89%);
  }
  textarea {
    flex-grow: 1;
    resize: none;
    min-height: 60px;
    border-radius: 5px;
    padding: 10px;
    font-size: 14px;
    font-weight: 500;
    border: 1px solid #b1b7c1;
    background-color: #f3f3f3;
    width: 100%;
  }
  textarea:focus {
    border: 1px solid #d8d8d8 !important;
    outline: none;
  }
}
.title-container {
  justify-content: space-between;
  border-top: 3px solid #dbdbdb;
  border-bottom: 3px solid transparent;
  position: sticky;
  background: white;
  z-index: 5;
  top: 0;
  padding: 20px 30px 10px;
}
.reciever,
.payer {
  font-weight: 600;
  color: #445566;
  border-bottom: 1px solid #dbdbdb;
  font-size: 16px;
  padding-bottom: 10px;
  margin-bottom: 6px;
}
.warning-message {
  font-weight: 500;
  color: #db4545;
  font-weight: 500;
  text-align: end;
  margin: 0;
}
.contract-form > * {
  transition: all 1s ease;
}
.dropdown-toggle::after {
  position: absolute;
  right: 10px;
  top: 18px;
}
.breadcrumb {
  margin: 10px 20px;
  a {
    font-weight: 600;
    font-family: "Montserrat";
    color: #445566;
    line-height: 24px;
  }
  li {
    padding: 4px;

    border-radius: 8px;
  }
  .breadcrumb-item:not(:last-child) {
    margin-right: 20px;
  }
  .breadcrumb-item {
    position: relative;
  }
  .breadcrumb-item + .breadcrumb-item::before {
    position: absolute;
    left: -13px;
  }
}
.form-check-input:checked {
  background-color: #ff7819;
  border-color: #ff7819;
  box-shadow: 0 0 0 0.25rem #ff79197a;
}
.form-check-input:focus {
  box-shadow: 0 0 0 0.25rem #ff79197a;
}
.accordion {
  display: flex;
  flex-direction: column;
  height: 93%;
  justify-content: space-between;
  padding: 0 30px;
  flex-grow: 1;
  gap: 5px;
  width: 100%;
  display: grid;
  grid-template-columns: 1fr;
}
.form-check-input {
  width: 20px;
  height: 20px;
}
.input-container {
  margin: 0 !important;
}
.line {
  width: inherit;
  height: 2px;
  background: black;
  position: absolute;
  bottom: 0;
}
.dropdown-toggle,
.dropdown-toggle:hover {
  min-height: 40px;
  background: transparent !important;
  color: #445566 !important;
  font-weight: 500;
  border: 1px solid #445566 !important;
  border-color: #445566 !important;
  width: 100%;
  text-align: start;
}
.dropdown-toggle:hover {
  background: #dbdbdb57;
}
.fin-container {
  .input-item {
    width: 100%;
  }
}
.dropdown-menu {
  width: 100%;
}
.dropdown-item {
  font-weight: 500;
  font-size: 14px;
}
.dropdown-item:hover {
  color: #ff7819;
  cursor: pointer;
  background: #dbdbdb57;
}
.title-accordion {
  //   padding: 0 15px 5px 5px;
  color: #445566;
  font-size: 18px;
  font-weight: 600;
  span {
    font-size: 15px;
    border-radius: 5px;
  }
}
.accordion-header:hover {
  &::before {
    content: "";
    position: absolute;
    top: 9px;
    left: 0;
    width: 2px;
    height: 50px;
    background-color: #ff7819;
  }
}

.ecp {
  text-align: start;
  margin-top: 10px;
  margin-left: 20px;
  margin-bottom: 0;
}

.label-check {
  margin-left: 10px;
}
.input-item {
  width: 50%;
}
.bank-type-button {
  transition: all 0.5s ease;
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 12px;
  border: 1px solid grey;
  display: inline-block;
}
.bank-type-button:not(:last-child) {
  margin-right: 10px;
}

.active {
  transition: all 0.5s ease;
  background-color: #445566;
  color: white;
}
.flex-container {
  display: flex;
  align-items: center;
  gap: 10px;
}
.input-container {
  width: 100%;
}
.toolbar-container {
  display: flex;
  gap: 9px;
}
.accordion-body {
  background: transparent;
  transition: all 1s ease;
  padding: 0px 20px 10px;
}
.error-group-message {
  transition: all 0 ease;
  position: absolute;
  right: 56px;
  font-size: 13px;
  bottom: 10px;
}
.accordion-button,
.list-group-item {
  font-size: 24px;
  outline: none;
  color: black;
  box-shadow: none;
  background: transparent;
  transition: all 1s ease;
  color: black;
  font-weight: 500;
  padding: 20px 20px;
}
.accordion-button {
  padding-bottom: 0px;
}
.accordion-collapse {
  transition: all 0.5s ease;
}
.accordion-button:not(.collapsed) {
  box-shadow: none;
}
.accordion-item:not(:last-child) {
  margin-bottom: 20px;
}
.accordion-item {
  border: none;
  position: relative;
  background: transparent;
  height: 100%;
}
.accordion-button:focus {
  border-color: transparent !important;
  box-shadow: none;
}
.changePosition {
  z-index: 10;
}
.accordion-button:not(.collapsed) {
  background: transparent;
  color: black;
}
.error-group {
  &::before {
    content: "";
    position: absolute;
    top: 9px;
    left: 0;
    width: 2px;
    height: 50px;
    background-color: #db4545;
  }
  .accordion-button:not(.collapsed) {
    background: transparent;
    color: #ff5b5b;
  }
  .title-accordion {
    color: #ff5b5b;
    span {
      font-size: 15px;
      border-radius: 5px;
      display: inline-block;
      padding: 4px;
    }
  }
  .label {
    color: #ff5b5b !important;
  }
}
.error-group-message {
  color: #ff5b5b;
}
.layout-body {
  padding: 0 15px;
}
.contract-title {
  font-size: 24px;
  color: #445566;
  font-weight: bold;
  margin-left: 20px;
}
</style>
